---
title: javascript_16
date: 2024-02-19 21:42:00 +0900
categories: [javascript]
tags: [js]
---

### ğŸŒŸ Promise
  ```javascript
    const pr = new Promise((resolve, reject) => {
      setTimeout(() => {
        resolve('OK');
      }, 3000);

    });

    pr.then(
      function(result){}, // promise ì´í–‰ ì‹œ
      function(err){}     // promise ê±°ë¶€ ì‹œ
    )

    pr.then(
      function(result){}, // promise ì´í–‰ ì‹œ
    )catch(){
      function(err){}     // promise ê±°ë¶€ ì‹œ
    }

    pr.then(
      function(result){}, // promise ì´í–‰ ì‹œ
    )catch(){
      function(err){}     // promise ê±°ë¶€ ì‹œ
    }finally(){           // ì„±ê³µ ì‹¤íŒ¨ì™€ ìƒê´€ ì—†ì´ ì‹¤í–‰
      function(){
        console.log('THE END');
      }
    }

    //classì™€ ë™ì¼í•˜ê²Œ í”„ë¡œí† íƒ€ì…ìœ¼ë¡œ ë„£ì–´ì¤Œ
    User.prototype.showName = function(){
      console.log(this.name);
    }

    const mike =  User("Mike", 30);

    class User2 = {
      constructor(name, age){
        this.name = name;
        this.age = age;
      }
    }

    const tom = new User2("Tom", 21); 
    //const Jane = User2("Jane", 21);   //Error
  ```
  + callback í•¨ìˆ˜
    - ì–´ë–¤ ì¼ì´ ì™„ë£Œëœ í›„ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜ callback 
  + new Promise ë°˜í™˜ê°’ : state/result
    - success
      state : pending â¡ fullfiilled
      result : undefined â¡ value
    - fail
      state : pending â¡ rejected
      result : undefined â¡ error
  + ê°€ë…ì„±ì´ ì¢‹ì€ catch ë¬¸ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŒ
  + finally ëŠ” ì„±ê³µê³¼ ì‹¤íŒ¨ ì—¬ë¶€ì— ìƒê´€ì—†ì´ ì‹¤í–‰ë¨      
<br>

* callback ì§€ì˜¥
  ```javascript
  const f1 = (callback) => {
    setTimeout(function(){
      console.log('1ë²ˆ ì£¼ë¬¸ ì™„ë£Œ');
      callback();
    }, 1000)
  };

  const f2 = (callback) => {
    setTimeout(function(){
      console.log('2ë²ˆ ì£¼ë¬¸ ì™„ë£Œ');
      callback();
    }, 3000)
  };

  const f3 = (callback) => {
    setTimeout(function(){
      console.log('3ë²ˆ ì£¼ë¬¸ ì™„ë£Œ');
      callback();
    }, 2000)
  };

  //promise ì‚¬ìš©í•˜ì§€ ì•Šì•˜ì„ ë•Œ - callback ì§€ì˜¥
  f1(function(){
    f2(function(){
      f3(function(){
          console.log('ë');
      })
    })
  });
  ```
<br>

* callback ì§€ì˜¥ ê°œì„ 
  ```javascript
  //ì½œë°± ì§€ì˜¥ ê°œì„ 
  const f1 = () => {
    return new Promise((res, rej) =>{
       setTimeout(function(){
        res('1ë²ˆ ì£¼ë¬¸ ì™„ë£Œ');
       }, 1000);
    });
  };

  const f2 = (msg) => {
    console.log(msg);
    return new Promise((res, rej) =>{
       setTimeout(function(){
        res('2ë²ˆ ì£¼ë¬¸ ì™„ë£Œ');
       }, 3000);
    });
  };

  const f3 = (msg) => {
    console.log(msg);
    return new Promise((res, rej) => {
      setTimeout(function(){
        res('3ë²ˆ ì£¼ë¬¸ ì™„ë£Œ');
      }, 2000);
    });
  };

  console.log('ì‹œì‘');
  f1()
    .then(res => f2(res))
    .then(res => f3(res))
    .then(res => console.log(res))
    .catch(console.log())
    .finally(() => {
      console.log('ë!')
    });

  //Promise.all(); 
  //ë°°ì—´ë¡œ ë°›ìŒ, í•œêº¼ë²ˆì— ì‹¤í–‰ ëª¨ë‘ ì‹¤í–‰
  //reject ë˜ë©´ ì‹¤íŒ¨
  //í•˜ë‚˜ì˜ í˜ì´ì§€ë„ ëˆ„ë½ë˜ë©´ ì•ˆë  ë•Œ
  console.time('x');
  Promise.all([f1(), f2(), f3()]).then((res) => {
    console.log(res);
    console.timeEnd('x');
  });

  //Promise.race(); 
  //í•˜ë‚˜ë„ ì™„ë£Œë˜ë©´ ë
  //ìš©ëŸ‰ì´ í° ì´ë¯¸ì§€ ë¡œë“œ ì‹œ ì‚¬ìš©
  console.time('x');
  Promise.race([f1(), f2(), f3()]).then((res) => {
    console.log(res);
    console.timeEnd('x');
  });

  ```

<br><br><br><br> 

:star: ì½”ë”©ì•…ë§ˆ's [ìë°”ìŠ¤í¬ë¦½íŠ¸ ì¤‘ê¸‰ ê°•ì¢Œ](https://www.youtube.com/watch?v=3Ao3OroqQLQ&list=PLZKTXPmaJk8JZ2NAC538UzhY_UNqMdZB4&index=16)ë¥¼ ë³´ê³  ì •ë¦¬í•œ ê²ƒì…ë‹ˆë‹¤.